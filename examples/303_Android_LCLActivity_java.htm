Version:0.9
StartHTML:0000000105
EndHTML:0000152332
StartFragment:0000000962
EndFragment:0000152316
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>mXScriptasHTML</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="SynEdit HTML exporter" />
<style type="text/css">
<!--
body { color: #000000; background-color: #FFFFFF; }
.java1-comment { color: #000080; font-style: italic; }
.java1-documentation { color: #B9D1EA; font-style: italic; }
.java1-identifier { }
.java1-invalidsymbol { color: #FF00FF; }
.java1-number { color: #FF0000; }
.java1-reservedword { color: #800080; font-weight: bold; }
.java1-space { color: #FFFFFF; }
.java1-string { color: #008080; }
.java1-symbol { }
-->
</style>
</head>
<body>
<!--StartFragment--><pre><code><span class="java1-reservedword">package</span><span class="java1-space"> </span><span class="java1-identifier">com.pascal.lcltest;

</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.app.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.content.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.os.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.widget.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.util.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.graphics.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.text.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.view.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.view.inputmethod.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.view.MenuItem.*;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.content.res.Configuration;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.content.Intent;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.hardware.Sensor;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.hardware.SensorEvent;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.hardware.SensorEventListener;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.hardware.SensorManager;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.telephony.SmsManager;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.location.Location;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.location.LocationListener;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">android.location.LocationManager;
</span><span class="java1-reservedword">import</span><span class="java1-space"> </span><span class="java1-identifier">java.util.*;

</span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">class</span><span class="java1-space"> </span><span class="java1-identifier">LCLActivity</span><span class="java1-space"> </span><span class="java1-reservedword">extends</span><span class="java1-space"> </span><span class="java1-identifier">Activity</span><span class="java1-space"> </span><span class="java1-reservedword">implements</span><span class="java1-space"> </span><span class="java1-identifier">SensorEventListener,</span><span class="java1-space"> </span><span class="java1-identifier">LocationListener
{
</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-comment">// Input connection to get character events
</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">class</span><span class="java1-space"> </span><span class="java1-identifier">LCLInputConnection</span><span class="java1-space"> </span><span class="java1-reservedword">extends</span><span class="java1-space"> </span><span class="java1-identifier">BaseInputConnection
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-identifier">SpannableStringBuilder</span><span class="java1-space"> </span><span class="java1-identifier">_editable;
</span><span class="java1-space">    </span><span class="java1-identifier">View</span><span class="java1-space"> </span><span class="java1-identifier">_lclView;

</span><span class="java1-space">    </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">LCLInputConnection(View</span><span class="java1-space"> </span><span class="java1-identifier">targetView,</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">fullEditor)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">super</span><span class="java1-symbol">(targetView,</span><span class="java1-space"> </span><span class="java1-identifier">fullEditor);
</span><span class="java1-space">      </span><span class="java1-identifier">_lclView</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(View)</span><span class="java1-space"> </span><span class="java1-identifier">targetView;
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-comment">/*    public Editable getEditable()
    {
      if (_editable == null)
      {
        _editable = (SpannableStringBuilder) Editable.Factory.getInstance()
        .newEditable(&quot;Placeholder&quot;);
      }
      return _editable;
    } This crashes in HTC */

</span><span class="java1-space">    </span><span class="java1-comment">// This method sends a text to be added at the current cursor position
</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">commitText(CharSequence</span><span class="java1-space"> </span><span class="java1-identifier">text,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">newCursorPosition)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-comment">//if (_editable != null) _editable.append(text);
</span><span class="java1-space">      </span><span class="java1-identifier">Log.v(</span><span class="java1-string">&quot;lclproject&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;LCLInputConnection.commitText =&quot;</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-identifier">text</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-string">&quot; newCursorPosition=&quot;</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-identifier">Integer.toString(newCursorPosition));

</span><span class="java1-space">      </span><span class="java1-comment">// Send each character of the string
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult,</span><span class="java1-space"> </span><span class="java1-identifier">i;
</span><span class="java1-space">      </span><span class="java1-reservedword">for</span><span class="java1-space"> </span><span class="java1-symbol">(i</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">;</span><span class="java1-space"> </span><span class="java1-identifier">i&lt;text.length();</span><span class="java1-space"> </span><span class="java1-identifier">i++)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnKey(-</span><span class="java1-number">1</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">text.charAt(i));
</span><span class="java1-space">        </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">&amp;</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.postInvalidate();
</span><span class="java1-space">      </span><span class="java1-symbol">}
</span><span class="java1-space">      </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">deleteSurroundingText(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">leftLength,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">rightLength)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-identifier">Log.v(</span><span class="java1-string">&quot;lclproject&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;LCLInputConnection.deleteSurroundingText left=&quot;</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-identifier">Integer.toString(leftLength)</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-string">&quot; right=&quot;</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-identifier">Integer.toString(rightLength));

</span><span class="java1-space">      </span><span class="java1-comment">// For each left surrounding text deletion, send a backspace key
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult,</span><span class="java1-space"> </span><span class="java1-identifier">i;
</span><span class="java1-space">      </span><span class="java1-reservedword">for</span><span class="java1-space"> </span><span class="java1-symbol">(i</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">;</span><span class="java1-space"> </span><span class="java1-identifier">i&lt;leftLength;</span><span class="java1-space"> </span><span class="java1-identifier">i++)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnKey(KeyEvent.ACTION_DOWN,</span><span class="java1-space"> </span><span class="java1-identifier">KeyEvent.KEYCODE_DEL,</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">char</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">        </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">&amp;</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.postInvalidate();
</span><span class="java1-space">        </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnKey(KeyEvent.ACTION_UP,</span><span class="java1-space"> </span><span class="java1-identifier">KeyEvent.KEYCODE_DEL,</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">char</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">        </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">&amp;</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.postInvalidate();
</span><span class="java1-space">      </span><span class="java1-symbol">}

</span><span class="java1-space">      </span><span class="java1-comment">// For each right surrounding text deletion, send a del key
</span><span class="java1-space">      </span><span class="java1-comment">// KEYCODE_FORWARD_DEL Since: API Level 11
</span><span class="java1-space">      </span><span class="java1-comment">/*for (i = 0; i&lt;leftLength; i++)
      {
        eventResult = LCLOnKey(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_FORWARD_DEL, null, (char) 0);
        if ((eventResult &amp; 1) != 0) lclsurface.postInvalidate();
        eventResult = LCLOnKey(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_FORWARD_DEL, null, (char) 0);
        if ((eventResult &amp; 1) != 0) lclsurface.postInvalidate();
      }*/

</span><span class="java1-space">      </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">super</span><span class="java1-symbol">.deleteSurroundingText(leftLength,</span><span class="java1-space"> </span><span class="java1-identifier">rightLength);
</span><span class="java1-space">    </span><span class="java1-symbol">}
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-comment">// Our drawing surface
</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">class</span><span class="java1-space"> </span><span class="java1-identifier">LCLSurface</span><span class="java1-space"> </span><span class="java1-reservedword">extends</span><span class="java1-space"> </span><span class="java1-identifier">View
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">LCLSurface(Context</span><span class="java1-space"> </span><span class="java1-identifier">context)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">super</span><span class="java1-symbol">(context);
</span><span class="java1-space">      </span><span class="java1-comment">// Allows View.postInvalidate() to work
</span><span class="java1-space">      </span><span class="java1-identifier">setWillNotDraw(</span><span class="java1-reservedword">false</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-comment">// We already double buffer, so no need for a second one
</span><span class="java1-space">      </span><span class="java1-identifier">setWillNotCacheDrawing(</span><span class="java1-reservedword">true</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-comment">// Set focus on us to get keyboard events
</span><span class="java1-space">      </span><span class="java1-identifier">requestFocus();
</span><span class="java1-space">      </span><span class="java1-identifier">setFocusableInTouchMode(</span><span class="java1-reservedword">true</span><span class="java1-symbol">);
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">protected</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onDraw(Canvas</span><span class="java1-space"> </span><span class="java1-identifier">canvas)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-comment">//Log.i(&quot;lclapp&quot;, &quot;onDraw started&quot;);
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lWidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">getWidth();
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lHeight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">getHeight();
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">oldlclformwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclformwidth;

</span><span class="java1-space">      </span><span class="java1-identifier">lclformwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lWidth;
</span><span class="java1-space">      </span><span class="java1-identifier">lclformheight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lHeight;
</span><span class="java1-space">      </span><span class="java1-identifier">lclscreenwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclformwidth;
</span><span class="java1-space">      </span><span class="java1-identifier">lclscreenheight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclformheight;

</span><span class="java1-space">      </span><span class="java1-comment">// Check if we rotated in the draw event, OnConfigurationChanged can't return the new form width =(
</span><span class="java1-space">      </span><span class="java1-comment">// see http://stackoverflow.com/questions/2524683/how-to-get-new-width-height-of-root-layout-in-onconfigurationchanged
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(lWidth</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-identifier">oldlclformwidth)</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnConfigurationChanged(lclxdpi,</span><span class="java1-space"> </span><span class="java1-identifier">lWidth);</span><span class="java1-space"> </span><span class="java1-comment">// we send xdpi because thats what the LCL uses for Screen.PixelsPerInch

</span><span class="java1-space">      </span><span class="java1-comment">//Log.v(&quot;lclproject&quot;, &quot;LCLSurface.onDraw width=&quot; + Integer.toString(lWidth)
</span><span class="java1-space">      </span><span class="java1-comment">//  + &quot; height=&quot; + Integer.toString(lHeight));
</span><span class="java1-space"> 
      </span><span class="java1-identifier">Bitmap</span><span class="java1-space"> </span><span class="java1-identifier">localbitmap</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">Bitmap.createBitmap(lWidth,</span><span class="java1-space"> </span><span class="java1-identifier">lHeight,</span><span class="java1-space"> </span><span class="java1-identifier">Bitmap.Config.ARGB_8888);
</span><span class="java1-space">      </span><span class="java1-identifier">LCLDrawToBitmap(lWidth,</span><span class="java1-space"> </span><span class="java1-identifier">lHeight,</span><span class="java1-space"> </span><span class="java1-identifier">localbitmap);
</span><span class="java1-space">      </span><span class="java1-identifier">canvas.drawBitmap(localbitmap,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-comment">//Log.i(&quot;lclapp&quot;, &quot;onDraw finished&quot;);
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">onKeyDown</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">keyCode,</span><span class="java1-space"> </span><span class="java1-identifier">KeyEvent</span><span class="java1-space"> </span><span class="java1-identifier">event)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-comment">//Log.v(&quot;lclproject&quot;, &quot;LCLSurface.onKeyDown&quot;);
</span><span class="java1-space">      </span><span class="java1-reservedword">super</span><span class="java1-symbol">.onKeyDown(keyCode,</span><span class="java1-space"> </span><span class="java1-identifier">event);
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnKey(KeyEvent.ACTION_DOWN,</span><span class="java1-space"> </span><span class="java1-identifier">keyCode,</span><span class="java1-space"> </span><span class="java1-identifier">event,</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">char</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">&amp;</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">postInvalidate();
</span><span class="java1-space">      </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">onKeyUp</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">keyCode,</span><span class="java1-space"> </span><span class="java1-identifier">KeyEvent</span><span class="java1-space"> </span><span class="java1-identifier">event)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-comment">// First handle the KeyUp event
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnKey(KeyEvent.ACTION_UP,</span><span class="java1-space"> </span><span class="java1-identifier">keyCode,</span><span class="java1-space"> </span><span class="java1-identifier">event,</span><span class="java1-space"> </span><span class="java1-identifier">event.getUnicodeChar());
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">&amp;</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">postInvalidate();

</span><span class="java1-space">      </span><span class="java1-comment">// Handling of the Back hardware key
</span><span class="java1-space">      </span><span class="java1-reservedword">super</span><span class="java1-symbol">.onKeyUp(keyCode,</span><span class="java1-space"> </span><span class="java1-identifier">event);
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">&amp;</span><span class="java1-space"> </span><span class="java1-number">2</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-comment">//Log.v(&quot;lclproject&quot;, &quot;BackKey going to home&quot;);
</span><span class="java1-space">        </span><span class="java1-identifier">finish();
</span><span class="java1-space">        </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">false</span><span class="java1-symbol">;</span><span class="java1-space"> </span><span class="java1-comment">// From the docs it seams that only returning false should do it, but calling finish() is really necessary
</span><span class="java1-space">      </span><span class="java1-symbol">}
</span><span class="java1-space">      </span><span class="java1-reservedword">else
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-comment">//Log.v(&quot;lclproject&quot;, &quot;BackKey not going to home&quot;);
</span><span class="java1-space">      </span><span class="java1-symbol">}

</span><span class="java1-space">      </span><span class="java1-comment">// Handling of the Menu hardware key
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(keyCode</span><span class="java1-space"> </span><span class="java1-symbol">==</span><span class="java1-space"> </span><span class="java1-identifier">KeyEvent.KEYCODE_MENU)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-identifier">flagIsMenuOpen</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">false</span><span class="java1-symbol">;</span><span class="java1-space"> </span><span class="java1-comment">// hard-coding now has a good result, we might change in the future if we ever start getting key events even while the menu is open
</span><span class="java1-space">        </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(flagIsMenuOpen)</span><span class="java1-space"> </span><span class="java1-identifier">closeOptionsMenu();
</span><span class="java1-space">        </span><span class="java1-reservedword">else</span><span class="java1-space"> </span><span class="java1-identifier">openOptionsMenu();
</span><span class="java1-space">        </span><span class="java1-identifier">flagIsMenuOpen</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">!flagIsMenuOpen;
</span><span class="java1-space">      </span><span class="java1-symbol">}

</span><span class="java1-space">      </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">onTouchEvent</span><span class="java1-space"> </span><span class="java1-symbol">(MotionEvent</span><span class="java1-space"> </span><span class="java1-identifier">event)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnTouch(event.getX(),</span><span class="java1-space"> </span><span class="java1-identifier">event.getY(),</span><span class="java1-space"> </span><span class="java1-identifier">event.getAction());
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">|</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">postInvalidate();
</span><span class="java1-space">      </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">InputConnection</span><span class="java1-space"> </span><span class="java1-identifier">onCreateInputConnection(EditorInfo</span><span class="java1-space"> </span><span class="java1-identifier">outAttrs)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-identifier">outAttrs.actionLabel</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">;
</span><span class="java1-space">      </span><span class="java1-identifier">outAttrs.label</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-string">&quot;Test text&quot;</span><span class="java1-symbol">;
</span><span class="java1-space">      </span><span class="java1-identifier">outAttrs.inputType</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS;
</span><span class="java1-space">      </span><span class="java1-identifier">outAttrs.imeOptions</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">EditorInfo.IME_ACTION_DONE;
</span><span class="java1-space">      </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">LCLInputConnection(</span><span class="java1-reservedword">this</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">);
</span><span class="java1-space">    </span><span class="java1-symbol">}

</span><span class="java1-space">    </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">onCheckIsTextEditor()
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">    </span><span class="java1-symbol">}
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// Global objects
</span><span class="java1-space">  </span><span class="java1-identifier">LCLSurface</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface;
</span><span class="java1-space">  </span><span class="java1-identifier">SensorManager</span><span class="java1-space"> </span><span class="java1-identifier">localSensorManager;

</span><span class="java1-space">  </span><span class="java1-comment">// Utility routines
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">static</span><span class="java1-space"> </span><span class="java1-reservedword">double</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">convertFloatsToDoubles(</span><span class="java1-reservedword">float</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">input)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(input</span><span class="java1-space"> </span><span class="java1-symbol">==</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">;
</span><span class="java1-space">    </span><span class="java1-reservedword">double</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">output</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-reservedword">double</span><span class="java1-symbol">[input.length];
</span><span class="java1-space">    </span><span class="java1-reservedword">for</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">i</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">;</span><span class="java1-space"> </span><span class="java1-identifier">i</span><span class="java1-space"> </span><span class="java1-symbol">&lt;</span><span class="java1-space"> </span><span class="java1-identifier">input.length;</span><span class="java1-space"> </span><span class="java1-identifier">i++)
</span><span class="java1-space">    </span><span class="java1-symbol">{</span><span class="java1-space">  </span><span class="java1-identifier">output[i]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">input[i];</span><span class="java1-space"> </span><span class="java1-symbol">}
</span><span class="java1-space">    </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-identifier">output;
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">ProcessEventResult(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">|</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">&amp;&amp;</span><span class="java1-space"> </span><span class="java1-symbol">(lclsurface</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">))</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.postInvalidate();
</span><span class="java1-space">    </span><span class="java1-comment">//if ((eventResult | 2) != 0) reserved for BACK key handling
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-comment">// Activity Events
</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------

</span><span class="java1-space">  </span><span class="java1-documentation">/** Called when the activity is first created. */
</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onCreate(Bundle</span><span class="java1-space"> </span><span class="java1-identifier">savedInstanceState)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">super</span><span class="java1-symbol">.onCreate(savedInstanceState);
</span><span class="java1-space">          
    </span><span class="java1-identifier">lclsurface</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">LCLSurface(</span><span class="java1-reservedword">this</span><span class="java1-symbol">);
</span><span class="java1-space">    </span><span class="java1-identifier">setContentView(lclsurface);
</span><span class="java1-space">    </span><span class="java1-identifier">lclsurface.postInvalidate();

</span><span class="java1-space">    </span><span class="java1-comment">// Tell the LCL that an OnCreate has happened and what is our instance
</span><span class="java1-space">    </span><span class="java1-identifier">lclformwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.getWidth();
</span><span class="java1-space">    </span><span class="java1-identifier">lclformheight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.getHeight();
</span><span class="java1-space">    </span><span class="java1-identifier">lclscreenwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclformwidth;
</span><span class="java1-space">    </span><span class="java1-identifier">lclscreenheight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclformheight;
</span><span class="java1-space">    </span><span class="java1-identifier">DisplayMetrics</span><span class="java1-space"> </span><span class="java1-identifier">metrics</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">DisplayMetrics();
</span><span class="java1-space">    </span><span class="java1-identifier">getWindowManager().getDefaultDisplay().getMetrics(metrics);
</span><span class="java1-space">    </span><span class="java1-identifier">lclxdpi</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">metrics.xdpi;
</span><span class="java1-space">    </span><span class="java1-identifier">lclydpi</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">metrics.ydpi;
</span><span class="java1-space">    </span><span class="java1-identifier">LCLOnCreate(</span><span class="java1-reservedword">this</span><span class="java1-symbol">);
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onConfigurationChanged</span><span class="java1-space"> </span><span class="java1-symbol">(Configuration</span><span class="java1-space"> </span><span class="java1-identifier">newConfig)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">super</span><span class="java1-symbol">.onConfigurationChanged(newConfig);

</span><span class="java1-space">    </span><span class="java1-identifier">lclformwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.getWidth();
</span><span class="java1-space">    </span><span class="java1-identifier">lclformheight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.getHeight();
</span><span class="java1-space">    </span><span class="java1-identifier">lclscreenwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclformwidth;
</span><span class="java1-space">    </span><span class="java1-identifier">lclscreenheight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclformheight;
</span><span class="java1-space">    </span><span class="java1-identifier">DisplayMetrics</span><span class="java1-space"> </span><span class="java1-identifier">metrics</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">DisplayMetrics();
</span><span class="java1-space">    </span><span class="java1-identifier">getWindowManager().getDefaultDisplay().getMetrics(metrics);
</span><span class="java1-space">    </span><span class="java1-identifier">lclxdpi</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">metrics.xdpi;
</span><span class="java1-space">    </span><span class="java1-identifier">lclydpi</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">metrics.ydpi;
</span><span class="java1-space">    </span><span class="java1-comment">// Don't call LCLOnConfigurationChanged, wait for a onDraw instead
</span><span class="java1-space">    </span><span class="java1-comment">//lclsurface.postInvalidate();
</span><span class="java1-space">    </span><span class="java1-comment">//Log.i(&quot;lclapp&quot;, &quot;onConfigurationChanged finished&quot;);
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">onCreateOptionsMenu(Menu</span><span class="java1-space"> </span><span class="java1-identifier">menu)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">Log.i(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;onCreateOptionsMenu&quot;</span><span class="java1-symbol">);
</span><span class="java1-space">    </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">super</span><span class="java1-symbol">.onCreateOptionsMenu(menu);
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">onPrepareOptionsMenu</span><span class="java1-space"> </span><span class="java1-symbol">(Menu</span><span class="java1-space"> </span><span class="java1-identifier">menu)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">Log.i(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;onPrepareOptionsMenu&quot;</span><span class="java1-symbol">);

</span><span class="java1-space">    </span><span class="java1-reservedword">super</span><span class="java1-symbol">.onPrepareOptionsMenu(menu);

</span><span class="java1-space">    </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">i;

</span><span class="java1-space">    </span><span class="java1-comment">// First clear the captions list
</span><span class="java1-space">    </span><span class="java1-reservedword">for</span><span class="java1-space"> </span><span class="java1-symbol">(i</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">;</span><span class="java1-space"> </span><span class="java1-identifier">i</span><span class="java1-space"> </span><span class="java1-symbol">&lt;</span><span class="java1-space"> </span><span class="java1-identifier">lclmenu_captions.length;</span><span class="java1-space"> </span><span class="java1-identifier">i++)
</span><span class="java1-space">      </span><span class="java1-identifier">lclmenu_captions[i]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-string">&quot;&quot;</span><span class="java1-symbol">;

</span><span class="java1-space">    </span><span class="java1-comment">// Now ask the LCL to fill it
</span><span class="java1-space">    </span><span class="java1-identifier">LCLOnMenuAction(</span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);

</span><span class="java1-space">    </span><span class="java1-comment">// And fill the menus with it
</span><span class="java1-space">    </span><span class="java1-identifier">menu.clear();
</span><span class="java1-space">    </span><span class="java1-reservedword">for</span><span class="java1-space"> </span><span class="java1-symbol">(i</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">;</span><span class="java1-space"> </span><span class="java1-identifier">i&lt;</span><span class="java1-space"> </span><span class="java1-identifier">lclmenu_captions.length;</span><span class="java1-space"> </span><span class="java1-identifier">i++)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(lclmenu_captions[i]</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-string">&quot;&quot;</span><span class="java1-symbol">)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-identifier">Log.i(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;onPrepareOptionsMenu item=&quot;</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-identifier">lclmenu_captions[i]);
</span><span class="java1-space">        </span><span class="java1-identifier">MenuItem</span><span class="java1-space"> </span><span class="java1-identifier">lMenuItem</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">menu.add(</span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">i,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">lclmenu_captions[i]);
</span><span class="java1-space">        </span><span class="java1-identifier">lMenuItem.setOnMenuItemClickListener(</span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">OnMenuItemClickListener()
</span><span class="java1-space">        </span><span class="java1-symbol">{
</span><span class="java1-space">          </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">onMenuItemClick(MenuItem</span><span class="java1-space"> </span><span class="java1-identifier">item)
</span><span class="java1-space">          </span><span class="java1-symbol">{
</span><span class="java1-space">            </span><span class="java1-identifier">flagIsMenuOpen</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">false</span><span class="java1-symbol">;
</span><span class="java1-space">            </span><span class="java1-identifier">LCLOnMenuAction(</span><span class="java1-number">1</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">item.getItemId());
</span><span class="java1-space">            </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">          </span><span class="java1-symbol">}
</span><span class="java1-space">        </span><span class="java1-symbol">});
</span><span class="java1-space">      </span><span class="java1-symbol">};
</span><span class="java1-space">    </span><span class="java1-symbol">};

</span><span class="java1-space">    </span><span class="java1-reservedword">return</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-comment">// JNI table of Pascal functions
</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLDrawToBitmap(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">width,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">height,</span><span class="java1-space"> </span><span class="java1-identifier">Bitmap</span><span class="java1-space"> </span><span class="java1-identifier">bitmap);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnTouch(</span><span class="java1-reservedword">float</span><span class="java1-space"> </span><span class="java1-identifier">x,</span><span class="java1-space"> </span><span class="java1-reservedword">float</span><span class="java1-space"> </span><span class="java1-identifier">y,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">action);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnCreate(LCLActivity</span><span class="java1-space"> </span><span class="java1-identifier">lclactivity);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnMessageBoxFinished(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">Result,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">DialogType);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnKey(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">kind,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">keyCode,</span><span class="java1-space"> </span><span class="java1-identifier">KeyEvent</span><span class="java1-space"> </span><span class="java1-identifier">event,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">AChar);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnTimer(Runnable</span><span class="java1-space"> </span><span class="java1-identifier">timerid);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnConfigurationChanged(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">ANewDPI,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">ANewWidth);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">ASensorKind,</span><span class="java1-space"> </span><span class="java1-reservedword">double</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">AValues);
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">native</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnMenuAction(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">kind,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">itemIndex);

</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-comment">// Functions exported to the Pascal side
</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------

</span><span class="java1-space">  </span><span class="java1-comment">// input: String lcltext, int lcltextsize
</span><span class="java1-space">  </span><span class="java1-comment">// output: int lclwidth, int lclheight, int lclascent, etc
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoGetTextBounds()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">Paint</span><span class="java1-space"> </span><span class="java1-identifier">localpaint</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Paint();
</span><span class="java1-space">    </span><span class="java1-identifier">Rect</span><span class="java1-space"> </span><span class="java1-identifier">localbounds</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Rect();
</span><span class="java1-space">    </span><span class="java1-identifier">localpaint.setTextSize(lcltextsize);
</span><span class="java1-space">    </span><span class="java1-identifier">localpaint.getTextBounds(lcltext,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">lcltext.length(),</span><span class="java1-space"> </span><span class="java1-identifier">localbounds);
</span><span class="java1-space">    </span><span class="java1-identifier">lclwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">localbounds.width();
</span><span class="java1-space">    </span><span class="java1-comment">// Painter.getTextBounds consistently gives us a too small size, so work around that
</span><span class="java1-space">    </span><span class="java1-identifier">lclwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">lclwidth</span><span class="java1-space"> </span><span class="java1-symbol">+</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-number">3</span><span class="java1-space"> </span><span class="java1-symbol">*</span><span class="java1-space"> </span><span class="java1-identifier">lcltextsize)</span><span class="java1-space"> </span><span class="java1-symbol">/</span><span class="java1-space"> </span><span class="java1-number">16</span><span class="java1-symbol">;
</span><span class="java1-space">    </span><span class="java1-comment">// Don't use just localbounds.height() from the source text
</span><span class="java1-space">    </span><span class="java1-comment">// because it will calculate the minimum necessary height,
</span><span class="java1-space">    </span><span class="java1-comment">// but we can't easily use that to draw text because it draws relative to the baseline
</span><span class="java1-space">    </span><span class="java1-identifier">localpaint.getTextBounds(</span><span class="java1-string">&quot;&Atilde;qg&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">3</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">localbounds);
</span><span class="java1-space">    </span><span class="java1-identifier">lclheight</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">localbounds.height();
</span><span class="java1-space">    </span><span class="java1-comment">// Also get some measures
</span><span class="java1-space">    </span><span class="java1-identifier">lcltextascent</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">localpaint.getFontMetrics().ascent;
</span><span class="java1-space">    </span><span class="java1-identifier">lcltextbottom</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">localpaint.getFontMetrics().bottom;
</span><span class="java1-space">    </span><span class="java1-identifier">lcltextdescent</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">localpaint.getFontMetrics().descent;
</span><span class="java1-space">    </span><span class="java1-identifier">lcltextleading</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">localpaint.getFontMetrics().leading;
</span><span class="java1-space">    </span><span class="java1-identifier">lcltexttop</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">int</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">localpaint.getFontMetrics().top;
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// input: String lcltext, int lclmaxwidth, int lcltextsize
</span><span class="java1-space">  </span><span class="java1-comment">// output: int lclmaxcount
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoGetTextPartialWidths()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">Paint</span><span class="java1-space"> </span><span class="java1-identifier">localpaint</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Paint();
</span><span class="java1-space">    </span><span class="java1-identifier">Rect</span><span class="java1-space"> </span><span class="java1-identifier">localbounds</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Rect();
</span><span class="java1-space">    </span><span class="java1-identifier">localpaint.setTextSize(lcltextsize);

</span><span class="java1-space">    </span><span class="java1-reservedword">float</span><span class="java1-space"> </span><span class="java1-identifier">localmaxwidth</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">float</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">lclmaxwidth;
</span><span class="java1-space">    </span><span class="java1-comment">//Log.i(&quot;lclapp&quot;, &quot;[LCLDoGetTextPartialWidths] lcltext=&quot;+lcltext+&quot; localmaxwidth=&quot;+Float.toString(localmaxwidth));
</span><span class="java1-space">    </span><span class="java1-identifier">lclmaxcount</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">localpaint.breakText(lcltext,</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">localmaxwidth,</span><span class="java1-space"> </span><span class="java1-identifier">lclpartialwidths);
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// input: String lcltext, int lclwidth, int lclheight
</span><span class="java1-space">  </span><span class="java1-comment">// output: lclbitmap
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoDrawText(</span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">ATextColor)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">lclbitmap</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">Bitmap.createBitmap(lclwidth,</span><span class="java1-space"> </span><span class="java1-identifier">lclheight,</span><span class="java1-space"> </span><span class="java1-identifier">Bitmap.Config.ARGB_8888);
</span><span class="java1-space">    </span><span class="java1-identifier">Canvas</span><span class="java1-space"> </span><span class="java1-identifier">localcanvas</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Canvas(lclbitmap);
</span><span class="java1-space">    </span><span class="java1-identifier">Paint</span><span class="java1-space"> </span><span class="java1-identifier">localpaint</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Paint();
</span><span class="java1-space">    </span><span class="java1-identifier">localpaint.setColor(ATextColor);
</span><span class="java1-space">    </span><span class="java1-identifier">localpaint.setTextSize(lcltextsize);
</span><span class="java1-space">    </span><span class="java1-identifier">localpaint.setFlags(Paint.ANTI_ALIAS_FLAG);
</span><span class="java1-space">    </span><span class="java1-identifier">localcanvas.drawColor(Color.TRANSPARENT);</span><span class="java1-space"> </span><span class="java1-comment">// TRANSPARENT
</span><span class="java1-space">    </span><span class="java1-comment">// The Y coordinate is the lower baseline of letters like &quot;abc&quot;
</span><span class="java1-space">    </span><span class="java1-comment">// see http://code.google.com/p/android/issues/detail?id=393
</span><span class="java1-space">    </span><span class="java1-identifier">localcanvas.drawText(lcltext,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">lclheight</span><span class="java1-space"> </span><span class="java1-symbol">-</span><span class="java1-space"> </span><span class="java1-identifier">lcltextbottom,</span><span class="java1-space"> </span><span class="java1-identifier">localpaint);
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// LCLType definitions

</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonBase</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000000</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonOk</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000001</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonCancel</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000002</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonHelp</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000003</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonYes</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000004</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonNo</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000005</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonClose</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000006</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonAbort</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000007</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonRetry</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000008</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonIgnore</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x00000009</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonAll</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x0000000A</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonYesToAll</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x0000000B</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonNoToAll</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x0000000C</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonOpen</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x0000000D</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonSave</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x0000000E</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">final</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">idButtonShield</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0x0000000F</span><span class="java1-symbol">;

</span><span class="java1-space">  </span><span class="java1-comment">// input: String lcltext, String lcltitle, int lclconfig (buttons)
</span><span class="java1-space">  </span><span class="java1-comment">// output: nothing, but calles LCLOnMessageBoxFinished
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoShowMessageBox()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">DialogInterface.OnClickListener</span><span class="java1-space"> </span><span class="java1-identifier">dialogClickListener</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">DialogInterface.OnClickListener()
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override
</span><span class="java1-space">      </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onClick(DialogInterface</span><span class="java1-space"> </span><span class="java1-identifier">dialog,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">which)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-reservedword">switch</span><span class="java1-space"> </span><span class="java1-symbol">(which)
</span><span class="java1-space">        </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">DialogInterface.BUTTON_POSITIVE:
</span><span class="java1-space">          </span><span class="java1-identifier">LCLOnMessageBoxFinished(lclbutton1,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">          </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">        </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">DialogInterface.BUTTON_NEUTRAL:
</span><span class="java1-space">          </span><span class="java1-identifier">LCLOnMessageBoxFinished(lclbutton2,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">          </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">        </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">DialogInterface.BUTTON_NEGATIVE:
</span><span class="java1-space">          </span><span class="java1-identifier">LCLOnMessageBoxFinished(lclbutton3,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">          </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">        </span><span class="java1-symbol">};
</span><span class="java1-space">      </span><span class="java1-symbol">}
</span><span class="java1-space">    </span><span class="java1-symbol">};

</span><span class="java1-space">    </span><span class="java1-identifier">DialogInterface.OnCancelListener</span><span class="java1-space"> </span><span class="java1-identifier">dialogCancelListener</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">DialogInterface.OnCancelListener()
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override
</span><span class="java1-space">      </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onCancel(DialogInterface</span><span class="java1-space"> </span><span class="java1-identifier">dialog)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-comment">// The Cancel button number matches for LCLIntf.MessageBox and LCLIntf.PromptDialog
</span><span class="java1-space">        </span><span class="java1-identifier">LCLOnMessageBoxFinished(idButtonCancel,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-symbol">}
</span><span class="java1-space">    </span><span class="java1-symbol">};

</span><span class="java1-space">    </span><span class="java1-identifier">AlertDialog.Builder</span><span class="java1-space"> </span><span class="java1-identifier">builder</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">AlertDialog.Builder(</span><span class="java1-reservedword">this</span><span class="java1-symbol">);
</span><span class="java1-space">    </span><span class="java1-identifier">builder.setMessage(lcltext);
</span><span class="java1-space">    </span><span class="java1-identifier">builder.setTitle(lcltitle);
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(lclbutton1</span><span class="java1-space"> </span><span class="java1-symbol">&gt;=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">builder.setPositiveButton(lclbutton1str,</span><span class="java1-space"> </span><span class="java1-identifier">dialogClickListener);
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(lclbutton2</span><span class="java1-space"> </span><span class="java1-symbol">&gt;=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">builder.setNeutralButton(lclbutton2str,</span><span class="java1-space"> </span><span class="java1-identifier">dialogClickListener);
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(lclbutton3</span><span class="java1-space"> </span><span class="java1-symbol">&gt;=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">builder.setNegativeButton(lclbutton3str,</span><span class="java1-space"> </span><span class="java1-identifier">dialogClickListener);
</span><span class="java1-space">    </span><span class="java1-identifier">builder.show().setOnCancelListener(dialogCancelListener);
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-identifier">Handler</span><span class="java1-space"> </span><span class="java1-identifier">LocalHandler</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Handler();

</span><span class="java1-space">  </span><span class="java1-reservedword">private</span><span class="java1-space"> </span><span class="java1-reservedword">class</span><span class="java1-space"> </span><span class="java1-identifier">LCLRunnable</span><span class="java1-space"> </span><span class="java1-reservedword">implements</span><span class="java1-space"> </span><span class="java1-identifier">Runnable
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">Destroyed</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">false</span><span class="java1-symbol">;

</span><span class="java1-space">    </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">run()
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnTimer(</span><span class="java1-reservedword">this</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-identifier">ProcessEventResult(eventResult);
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">this</span><span class="java1-symbol">.Destroyed</span><span class="java1-space"> </span><span class="java1-symbol">==</span><span class="java1-space"> </span><span class="java1-reservedword">false</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-identifier">LocalHandler.postDelayed(</span><span class="java1-reservedword">this</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">lcltimerinterval);
</span><span class="java1-space">    </span><span class="java1-symbol">}
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-comment">// input:  int lcltimerinterval in milliseconds
</span><span class="java1-space">  </span><span class="java1-comment">// output:  Runnable lcltimerid
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoCreateTimer()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">lcltimerid</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">LCLRunnable();

</span><span class="java1-space">    </span><span class="java1-identifier">LocalHandler.removeCallbacks(lcltimerid);
</span><span class="java1-space">    </span><span class="java1-identifier">LocalHandler.postDelayed(lcltimerid,</span><span class="java1-space"> </span><span class="java1-identifier">lcltimerinterval);
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-comment">// input: Runnable lcltimerid
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoDestroyTimer()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">LocalHandler.removeCallbacks(lcltimerid);
</span><span class="java1-space">    </span><span class="java1-symbol">((LCLRunnable)</span><span class="java1-space"> </span><span class="java1-identifier">lcltimerid).Destroyed</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">true</span><span class="java1-symbol">;
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoHideVirtualKeyboard()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">InputMethodManager</span><span class="java1-space"> </span><span class="java1-identifier">localInputManager</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
</span><span class="java1-space">    </span><span class="java1-identifier">localInputManager.hideSoftInputFromWindow(lclsurface.getWindowToken(),</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoShowVirtualKeyboard()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">InputMethodManager</span><span class="java1-space"> </span><span class="java1-identifier">localInputManager</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
</span><span class="java1-space">    </span><span class="java1-identifier">localInputManager.showSoftInput(lclsurface,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-comment">// SensorEventListener overrides

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onSensorChanged(SensorEvent</span><span class="java1-space"> </span><span class="java1-identifier">event)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">double</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">eventValues</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">convertFloatsToDoubles(event.values);
</span><span class="java1-space">    </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventKind</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">event.sensor.getType();
</span><span class="java1-space">    </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(eventKind,</span><span class="java1-space"> </span><span class="java1-identifier">eventValues);
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">|</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">&amp;&amp;</span><span class="java1-space"> </span><span class="java1-symbol">(lclsurface</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">))</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.postInvalidate();
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onAccuracyChanged(Sensor</span><span class="java1-space"> </span><span class="java1-identifier">sensor,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">accuracy)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoStartReadingAccelerometer()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">localSensorManager</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(SensorManager)</span><span class="java1-space"> </span><span class="java1-identifier">getSystemService(SENSOR_SERVICE);
</span><span class="java1-space">    </span><span class="java1-identifier">localSensorManager.registerListener(</span><span class="java1-reservedword">this</span><span class="java1-symbol">,
</span><span class="java1-space">      </span><span class="java1-identifier">localSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
</span><span class="java1-space">      </span><span class="java1-identifier">SensorManager.SENSOR_DELAY_NORMAL);
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoStopReadingAccelerometer()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">localSensorManager.unregisterListener(</span><span class="java1-reservedword">this</span><span class="java1-symbol">);
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-comment">// input: String lcldestination, String lcltext (Body)
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoSendMessage()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(lclkind</span><span class="java1-space"> </span><span class="java1-symbol">==</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-identifier">PendingIntent</span><span class="java1-space"> </span><span class="java1-identifier">sentPI</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">PendingIntent.getBroadcast(</span><span class="java1-reservedword">this</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,
</span><span class="java1-space">        </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Intent(</span><span class="java1-string">&quot;SMS_SENT&quot;</span><span class="java1-symbol">),</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);

</span><span class="java1-space">      </span><span class="java1-identifier">PendingIntent</span><span class="java1-space"> </span><span class="java1-identifier">deliveredPI</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">PendingIntent.getBroadcast(</span><span class="java1-reservedword">this</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,
</span><span class="java1-space">        </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">Intent(</span><span class="java1-string">&quot;SMS_DELIVERED&quot;</span><span class="java1-symbol">),</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">);

</span><span class="java1-space">      </span><span class="java1-comment">//---when the SMS has been sent---
</span><span class="java1-space">      </span><span class="java1-identifier">registerReceiver(</span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">BroadcastReceiver()
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onReceive(Context</span><span class="java1-space"> </span><span class="java1-identifier">arg0,</span><span class="java1-space"> </span><span class="java1-identifier">Intent</span><span class="java1-space"> </span><span class="java1-identifier">arg1)
</span><span class="java1-space">        </span><span class="java1-symbol">{
</span><span class="java1-space">          </span><span class="java1-reservedword">double</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">statusArray</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-reservedword">double</span><span class="java1-symbol">[</span><span class="java1-number">1</span><span class="java1-symbol">];
</span><span class="java1-space">          </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">;
</span><span class="java1-space">          </span><span class="java1-reservedword">switch</span><span class="java1-space"> </span><span class="java1-symbol">(getResultCode())
</span><span class="java1-space">          </span><span class="java1-symbol">{
</span><span class="java1-space">            </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">Activity.RESULT_OK:
</span><span class="java1-space">              </span><span class="java1-identifier">statusArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">1.0</span><span class="java1-symbol">;
</span><span class="java1-space">              </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">11</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">statusArray);
</span><span class="java1-space">              </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">            </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">SmsManager.RESULT_ERROR_GENERIC_FAILURE:
</span><span class="java1-space">              </span><span class="java1-identifier">statusArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">2.0</span><span class="java1-symbol">;
</span><span class="java1-space">              </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">11</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">statusArray);
</span><span class="java1-space">              </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">            </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">SmsManager.RESULT_ERROR_NO_SERVICE:
</span><span class="java1-space">              </span><span class="java1-identifier">statusArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">3.0</span><span class="java1-symbol">;
</span><span class="java1-space">              </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">11</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">statusArray);
</span><span class="java1-space">              </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">            </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">SmsManager.RESULT_ERROR_NULL_PDU:
</span><span class="java1-space">              </span><span class="java1-identifier">statusArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">2.0</span><span class="java1-symbol">;
</span><span class="java1-space">              </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">11</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">statusArray);
</span><span class="java1-space">              </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">            </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">SmsManager.RESULT_ERROR_RADIO_OFF:
</span><span class="java1-space">              </span><span class="java1-identifier">statusArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">5.0</span><span class="java1-symbol">;
</span><span class="java1-space">              </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">11</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">statusArray);
</span><span class="java1-space">              </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">          </span><span class="java1-symbol">}
</span><span class="java1-space">          </span><span class="java1-identifier">ProcessEventResult(eventResult);
</span><span class="java1-space">        </span><span class="java1-symbol">}
</span><span class="java1-space">      </span><span class="java1-symbol">},</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">IntentFilter(</span><span class="java1-string">&quot;SMS_SENT&quot;</span><span class="java1-symbol">));

</span><span class="java1-space">      </span><span class="java1-comment">//---when the SMS has been delivered---
</span><span class="java1-space">      </span><span class="java1-identifier">registerReceiver(</span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">BroadcastReceiver()
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onReceive(Context</span><span class="java1-space"> </span><span class="java1-identifier">arg0,</span><span class="java1-space"> </span><span class="java1-identifier">Intent</span><span class="java1-space"> </span><span class="java1-identifier">arg1)
</span><span class="java1-space">        </span><span class="java1-symbol">{
</span><span class="java1-space">          </span><span class="java1-reservedword">double</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">statusArray</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-reservedword">double</span><span class="java1-symbol">[</span><span class="java1-number">1</span><span class="java1-symbol">];
</span><span class="java1-space">          </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">;
</span><span class="java1-space">          </span><span class="java1-reservedword">switch</span><span class="java1-space"> </span><span class="java1-symbol">(getResultCode())
</span><span class="java1-space">          </span><span class="java1-symbol">{
</span><span class="java1-space">            </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">Activity.RESULT_OK:
</span><span class="java1-space">              </span><span class="java1-identifier">statusArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">10.0</span><span class="java1-symbol">;
</span><span class="java1-space">              </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">11</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">statusArray);
</span><span class="java1-space">              </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">            </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-identifier">Activity.RESULT_CANCELED:
</span><span class="java1-space">              </span><span class="java1-identifier">statusArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-number">11.0</span><span class="java1-symbol">;
</span><span class="java1-space">              </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">11</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">statusArray);
</span><span class="java1-space">              </span><span class="java1-reservedword">break</span><span class="java1-symbol">;
</span><span class="java1-space">          </span><span class="java1-symbol">}
</span><span class="java1-space">          </span><span class="java1-identifier">ProcessEventResult(eventResult);
</span><span class="java1-space">        </span><span class="java1-symbol">}
</span><span class="java1-space">      </span><span class="java1-symbol">},</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">IntentFilter(</span><span class="java1-string">&quot;SMS_DELIVERED&quot;</span><span class="java1-symbol">));

</span><span class="java1-space">      </span><span class="java1-comment">// SMS sending seams to cause an awful lot of exceptions
</span><span class="java1-space">      </span><span class="java1-comment">// See: http://stackoverflow.com/questions/4580952/why-do-i-get-nullpointerexception-when-sending-an-sms-on-an-htc-desire-or-what
</span><span class="java1-space">      </span><span class="java1-comment">// See: http://code.google.com/p/android/issues/detail?id=3718
</span><span class="java1-space">      </span><span class="java1-reservedword">try
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-identifier">SmsManager</span><span class="java1-space"> </span><span class="java1-identifier">sms</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">SmsManager.getDefault();
</span><span class="java1-space">        </span><span class="java1-identifier">Log.i(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;[LCLDoSendMessage] lcldestination=&quot;</span><span class="java1-symbol">+lcldestination+</span><span class="java1-string">&quot; lcltext=&quot;</span><span class="java1-symbol">+lcltext);
</span><span class="java1-space">        </span><span class="java1-identifier">ArrayList&lt;String&gt;</span><span class="java1-space"> </span><span class="java1-identifier">parts</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">sms.divideMessage(lcltext);
</span><span class="java1-space">        </span><span class="java1-comment">//sms.sendMultipartTextMessage(lcldestination, null, parts, sentPI, deliveredPI);
</span><span class="java1-space">        </span><span class="java1-identifier">sms.sendTextMessage(lcldestination,</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">lcltext,</span><span class="java1-space"> </span><span class="java1-identifier">sentPI,</span><span class="java1-space"> </span><span class="java1-identifier">deliveredPI);
</span><span class="java1-space">      </span><span class="java1-symbol">}
</span><span class="java1-space">      </span><span class="java1-reservedword">catch</span><span class="java1-space"> </span><span class="java1-symbol">(Exception</span><span class="java1-space"> </span><span class="java1-identifier">e)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-symbol">}
</span><span class="java1-space">    </span><span class="java1-symbol">}
</span><span class="java1-space">  </span><span class="java1-symbol">};

</span><span class="java1-space">  </span><span class="java1-comment">// LocationListener overrides

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onLocationChanged(Location</span><span class="java1-space"> </span><span class="java1-identifier">loc)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(loc</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">double</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">positionArray</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-reservedword">double</span><span class="java1-symbol">[</span><span class="java1-number">6</span><span class="java1-symbol">];
</span><span class="java1-space">      </span><span class="java1-identifier">positionArray[</span><span class="java1-number">0</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">loc.getLatitude();
</span><span class="java1-space">      </span><span class="java1-identifier">positionArray[</span><span class="java1-number">1</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">loc.getLongitude();
</span><span class="java1-space">      </span><span class="java1-identifier">positionArray[</span><span class="java1-number">2</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">loc.getAltitude();
</span><span class="java1-space">      </span><span class="java1-identifier">positionArray[</span><span class="java1-number">3</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">double</span><span class="java1-symbol">)loc.getAccuracy();
</span><span class="java1-space">      </span><span class="java1-identifier">positionArray[</span><span class="java1-number">4</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">double</span><span class="java1-symbol">)loc.getSpeed();
</span><span class="java1-space">      </span><span class="java1-identifier">positionArray[</span><span class="java1-number">5</span><span class="java1-symbol">]</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(</span><span class="java1-reservedword">double</span><span class="java1-symbol">)loc.getTime();
</span><span class="java1-space">      </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">eventResult</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-identifier">LCLOnSensorChanged(-</span><span class="java1-number">10</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-identifier">positionArray);
</span><span class="java1-space">      </span><span class="java1-reservedword">if</span><span class="java1-space"> </span><span class="java1-symbol">(((eventResult</span><span class="java1-space"> </span><span class="java1-symbol">|</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">)</span><span class="java1-space"> </span><span class="java1-symbol">&amp;&amp;</span><span class="java1-space"> </span><span class="java1-symbol">(lclsurface</span><span class="java1-space"> </span><span class="java1-symbol">!=</span><span class="java1-space"> </span><span class="java1-reservedword">null</span><span class="java1-symbol">))</span><span class="java1-space"> </span><span class="java1-identifier">lclsurface.postInvalidate();
</span><span class="java1-space">    </span><span class="java1-symbol">}
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onProviderDisabled(String</span><span class="java1-space"> </span><span class="java1-identifier">provider)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onProviderEnabled(String</span><span class="java1-space"> </span><span class="java1-identifier">provider)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onStatusChanged(String</span><span class="java1-space"> </span><span class="java1-identifier">provider,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">status,</span><span class="java1-space"> </span><span class="java1-identifier">Bundle</span><span class="java1-space"> </span><span class="java1-identifier">extras)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// input:  int lclkind
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoRequestPositionInfo()
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-identifier">LocationManager</span><span class="java1-space"> </span><span class="java1-identifier">mlocManager</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-symbol">(LocationManager)getSystemService(Context.LOCATION_SERVICE);
</span><span class="java1-space">    </span><span class="java1-reservedword">switch</span><span class="java1-space"> </span><span class="java1-symbol">(lclkind)
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">:</span><span class="java1-space"> </span><span class="java1-identifier">mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-reservedword">this</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-reservedword">case</span><span class="java1-space"> </span><span class="java1-number">2</span><span class="java1-symbol">:</span><span class="java1-space"> </span><span class="java1-identifier">mlocManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-number">0</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-reservedword">this</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-reservedword">default</span><span class="java1-symbol">:</span><span class="java1-space"> </span><span class="java1-identifier">Log.i(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;[LCLDoRequestPositionInfo] Wrong lclkind parameter&quot;</span><span class="java1-symbol">);
</span><span class="java1-space">    </span><span class="java1-symbol">}
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// Prepare dialog callbacks
</span><span class="java1-space">  </span><span class="java1-comment">// for TCDComboBox
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">LCLDoPrepareSelectItemDialog(CharSequence[]</span><span class="java1-space"> </span><span class="java1-identifier">items,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">selected,</span><span class="java1-space"> </span><span class="java1-identifier">AlertDialog.Builder</span><span class="java1-space"> </span><span class="java1-identifier">dialog)
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-comment">//Log.i(&quot;lclapp&quot;, &quot;LCLDoPrepareSelectItemDialog&quot;);
</span><span class="java1-space">    </span><span class="java1-identifier">dialog.setSingleChoiceItems(items,</span><span class="java1-space"> </span><span class="java1-identifier">selected,</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">DialogInterface.OnClickListener()
</span><span class="java1-space">    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-invalidsymbol">@</span><span class="java1-identifier">Override</span><span class="java1-space"> </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">void</span><span class="java1-space"> </span><span class="java1-identifier">onClick(DialogInterface</span><span class="java1-space"> </span><span class="java1-identifier">dialog,</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">which)
</span><span class="java1-space">      </span><span class="java1-symbol">{
</span><span class="java1-space">        </span><span class="java1-comment">//Log.i(&quot;lclapp&quot;, &quot;LCLDoPrepareSelectItemDialog.onClick&quot;);
</span><span class="java1-space">        </span><span class="java1-identifier">LCLOnMessageBoxFinished(which,</span><span class="java1-space"> </span><span class="java1-number">1</span><span class="java1-symbol">);
</span><span class="java1-space">        </span><span class="java1-identifier">dialog.dismiss();
</span><span class="java1-space">      </span><span class="java1-symbol">}
</span><span class="java1-space">    </span><span class="java1-symbol">});
</span><span class="java1-space">  </span><span class="java1-symbol">}

</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-comment">// Fields exported to the Pascal side for easier data communication
</span><span class="java1-space">  </span><span class="java1-comment">// -------------------------------------------
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">String</span><span class="java1-space"> </span><span class="java1-identifier">lcltext;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">String</span><span class="java1-space"> </span><span class="java1-identifier">lcltitle;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">String</span><span class="java1-space"> </span><span class="java1-identifier">lclbutton1str;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">String</span><span class="java1-space"> </span><span class="java1-identifier">lclbutton2str;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">String</span><span class="java1-space"> </span><span class="java1-identifier">lclbutton3str;
</span><span class="java1-space">  </span><span class="java1-comment">//
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclwidth;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclheight;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclbutton1;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclbutton2;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclbutton3;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">Bitmap</span><span class="java1-space"> </span><span class="java1-identifier">lclbitmap;
</span><span class="java1-space">  </span><span class="java1-comment">//
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lcltextsize;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lcltextascent;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lcltextbottom;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lcltextdescent;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lcltextleading;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lcltexttop;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclmaxwidth;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclmaxcount;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">float</span><span class="java1-symbol">[]</span><span class="java1-space"> </span><span class="java1-identifier">lclpartialwidths;
</span><span class="java1-space">  </span><span class="java1-comment">//
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lcltimerinterval;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">Runnable</span><span class="java1-space"> </span><span class="java1-identifier">lcltimerid;
</span><span class="java1-space">  </span><span class="java1-comment">//
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclxdpi;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclydpi;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclformwidth;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclformheight;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclscreenwidth;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclscreenheight;
</span><span class="java1-space">  </span><span class="java1-comment">// for LazDeviceAPIs
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">String</span><span class="java1-space"> </span><span class="java1-identifier">lcldestination;
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">int</span><span class="java1-space"> </span><span class="java1-identifier">lclkind;
</span><span class="java1-space">  </span><span class="java1-comment">// for the menus
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-identifier">String[]</span><span class="java1-space"> </span><span class="java1-identifier">lclmenu_captions</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">new</span><span class="java1-space"> </span><span class="java1-identifier">String[</span><span class="java1-number">6</span><span class="java1-symbol">];
</span><span class="java1-space">  </span><span class="java1-reservedword">public</span><span class="java1-space"> </span><span class="java1-reservedword">boolean</span><span class="java1-space"> </span><span class="java1-identifier">flagIsMenuOpen</span><span class="java1-space"> </span><span class="java1-symbol">=</span><span class="java1-space"> </span><span class="java1-reservedword">false</span><span class="java1-symbol">;

</span><span class="java1-space">  </span><span class="java1-reservedword">static
</span><span class="java1-space">  </span><span class="java1-symbol">{
</span><span class="java1-space">    </span><span class="java1-reservedword">try</span><span class="java1-space"> 
    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-identifier">Log.i(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;Trying to load liblclapp.so&quot;</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-identifier">System.loadLibrary(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">);
</span><span class="java1-space">    </span><span class="java1-symbol">}</span><span class="java1-space"> 
    </span><span class="java1-reservedword">catch</span><span class="java1-symbol">(UnsatisfiedLinkError</span><span class="java1-space"> </span><span class="java1-identifier">ule)</span><span class="java1-space"> 
    </span><span class="java1-symbol">{
</span><span class="java1-space">      </span><span class="java1-identifier">Log.e(</span><span class="java1-string">&quot;lclapp&quot;</span><span class="java1-symbol">,</span><span class="java1-space"> </span><span class="java1-string">&quot;WARNING: Could not load liblclapp.so&quot;</span><span class="java1-symbol">);
</span><span class="java1-space">      </span><span class="java1-identifier">ule.printStackTrace();
</span><span class="java1-space">    </span><span class="java1-symbol">}
</span><span class="java1-space">  </span><span class="java1-symbol">}
}

</span></code></pre><!--EndFragment--></body>
</html>